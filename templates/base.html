<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desh Ke Haath - States Alag, Jazba Ek</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <!-- Google Fonts for premium typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">
</head>

<body>
    <header class="main-header">
        <div class="logo-container">
            <a href="{{ url_for('home') }}" class="logo-link">
                <img src="{{ url_for('static', filename='images/custom_logo.png') }}"
                    onerror="this.src='{{ url_for('static', filename='images/logo_map.png') }}';"
                    alt="Desh Ke Haath Logo" class="site-logo">
            </a>
        </div>
        <nav class="main-nav">
            <ul>
                <li><a href="{{ url_for('home') }}">Home</a></li>
                <li><a href="{{ url_for('map_page') }}">Map</a></li>
                <li><a href="{{ url_for('products') }}">Products</a></li>
                <li><a href="{{ url_for('artisans') }}">Artists</a></li>
                <li><a href="{{ url_for('about') }}">About</a></li>
                <li class="nav-item-has-dropdown">
                    <a href="#">AI Craft <span style="font-size: 0.8em; margin-left: 4px;">â–¼</span></a>
                    <ul class="nav-dropdown">
                        <li><a href="{{ url_for('ai_craft') }}">Computer Vision</a></li>
                        <li><a href="{{ url_for('voice') }}">Voice Assistance</a></li>
                        <li><a href="{{ url_for('data') }}">Data Insights</a></li>
                        <li><a href="{{ url_for('ar_vr') }}">AR/VR Previews</a></li>
                        <li><a href="{{ url_for('design_craft') }}">Design Your Own Artifact</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
        <div class="header-actions">
            <button class="theme-toggle" aria-label="Toggle Dark Mode">
                <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
                <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    style="display: none;">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
            </button>
            <a href="/cart" class="cart-btn" aria-label="Shopping Cart">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="feather feather-shopping-bag">
                    <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <path d="M16 10a4 4 0 0 1-8 0"></path>
                </svg>
                <span class="cart-count">0</span>
            </a>
            <div class="profile-menu">
                <button class="profile-icon" aria-label="Account"
                    onclick="document.querySelector('.profile-dropdown').classList.toggle('active')">
                    {% if current_user.is_authenticated and current_user.profile_image and current_user.profile_image !=
                    'default.jpg' %}
                    <img src="{{ url_for('static', filename='uploads/profiles/' + current_user.profile_image) }}"
                        alt="{{ current_user.name }}"
                        style="width: 24px; height: 24px; border-radius: 50%; object-fit: cover;">
                    {% else %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    {% endif %}
                </button>
                <div class="profile-dropdown">
                    <span class="dropdown-user">Hello, {{ current_user.name }}</span>
                    <hr style="margin: 8px 0; border: 0; border-top: 1px solid var(--border-color);">
                    <a href="{{ url_for('profile') }}" class="dropdown-item">My Profile</a>
                    <a href="{{ url_for('orders') }}" class="dropdown-item">My Orders</a>
                    <hr style="margin: 8px 0; border: 0; border-top: 1px solid var(--border-color);">
                    <a href="{{ url_for('logout') }}" class="dropdown-item">Log Out</a>
                </div>
            </div>
        </div>
        <div class="mobile-menu-toggle">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </header>

    <main>
        {% block content %}{% endblock %}
    </main>

    <footer class="main-footer">
        <p>&copy; 2026 Desh Ke Haath. All rights reserved.</p>
    </footer>

    <!-- Chatbot Widget -->
    <div class="chatbot-widget">
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                <h3>Craft Assistant</h3>
                <button id="closeChat">&times;</button>
            </div>
            <div class="chat-body" id="chatBody">
                <div class="message bot-message">
                    Hello! Welcome to Indian Craft. How can I help you today?
                </div>
                <div class="chat-options">
                    <button class="chat-option-btn">Track my order</button>
                    <button class="chat-option-btn">Best selling products</button>
                    <button class="chat-option-btn">Return policy</button>
                    <button class="chat-option-btn">Contact support</button>
                </div>
            </div>
            <div class="chat-input-area">
                <input type="text" placeholder="Type a message...">
                <button>Send</button>
            </div>
        </div>
        <button class="chat-fab" id="chatFab">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="11" width="18" height="10" rx="2"></rect>
                <circle cx="12" cy="5" r="2"></circle>
                <path d="M12 7v4"></path>
                <line x1="8" y1="16" x2="8.01" y2="16"></line>
                <line x1="16" y1="16" x2="16.01" y2="16"></line>
            </svg>
        </button>
    </div>

    <script>window.CHAT_API_URL = "{{ url_for('chat') }}";</script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>

</html>